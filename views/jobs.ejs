<%- include("partials/head.ejs") %> <%- include("partials/header.ejs") %>

<h2>Jobs List</h2>
<table id="jobs-table">
  <tr id="jobs-table-header">
    <th>Company</th>
    <th>Position</th>
    <th>Status</th>
    <th colspan="2"></th>
  </tr>
    <% if (jobs && jobs.length) { %>
    <% jobs.forEach((job) => { %>
      <tr>
        <td><%= job.company %></td>
        <td><%= job.position %></td>
        <td><%= job.status %></td>
        <td><a href="/jobs/edit/<%= job._id %>"><button type="button">EDIT</button></a></td>
        <td>
          <form method="POST" action="/jobs/delete/<%= job.id %>">
            <button type="submit">DELETE</button>
            <input type="hidden" name="_csrf" value="<%= _csrf %>">
          </form>
        </td>
      </tr>
    <% }) %>
  <% } %>
<tr></tr>
  <form method="POST" action="/jobs">
    <tr>
      <td>
        <input type="text" name="company" id="company" placeholder="ENTER COMPANY" />
      </td>
      <td>
        <input type="text" name="position" id="position" placeholder="ENTER POSITION"/>
      </td>
      <td>
        <select name="status" id="status">
          <option value="pending">PENDING</option>
          <option value="interview">INTERVIEW</option>
          <option value="declined">DECLINED</option>
        </select>
      </td>
      <td></td>
      <td>
          <button type="submit">ADD NEW JOB</button>
      </td>
    </tr>
  <input type="hidden" name="_csrf" value="<%= _csrf %>" />
</form>
</table>

<%- include("partials/footer.ejs") %>